{% extends "base.html" %}
{% block content %}
<div style='padding: 1% 20%'>
    <small><button onclick="showDiv()" class='expand-btn' style="font-size: 8pt">Create Ticket</button></small>
    <div id='expand' class='expand-content'>
        <form action="" method="post">
            <div>
                Subject: {{ ticketForm.subject(class_='transparent') }}{{ ticketForm.priorty }} Status:{{ ticketForm.status }} Category:{{ ticketForm.category }}<br>
                Body: {{ ticketForm.body(class_="fresh-frm") }}
            </div>
            <div style='margin: 10px'>
                {{ ticketForm.submitTicket }}
            </div>
        </form>
    </div>
    <div style='height: 20%; width: 100%;'>
        <table>
            <tr><th style='width: 5%'>ID</th><th style='width: 54%'>Subject</th><th style='width: 5%'>Status</th><th style='width: 5%'>Priority</th><th style='width: 5%'>Updated At</th><th style='width: 7%'>Created By</th><th style='width: 7%'>Assigned</th><th style='width: 10%'>Due By</th></tr>
            {% for tick in tickets %}
            <tr><td><a href="/ticket/{{ option }}/{{ tick.id }}">{{ tick.id }}</a></td><td><a href="/ticket/{{ option }}/{{ tick.id }}">{{ tick.subject }}</a></td><td>{{ tick.status.name }}</td><td>{{ tick.priority.name }}</td><td>{{ tick.updated_at }}</td><td>{{ tick.created_by }}</td><td>{{ tick.assigned }}</td><td>{{ tick.due_by }}</td></tr>
            {% endfor %}
        </table>
    </div> 
    
    <div style='height: 70%; width: 100%; padding: 5% 0;'>
        <h3>Content</h3>
        <div style='padding: 1%;'>
        <p style='background-color: lightgray; padding: 1%'>{{ ticket.body }}</p>
        </div>
        <br>
        <h3>Comments</h3>
        <table>
            {% for comment in comments %}
            <tr><td style='width: 100%; padding: 12px 0;'><p>{{ comment.body }}</p><br><p><small>{{ comment.created_by }} at {{ comment.created_at }}</small></p></td></tr>
            {% endfor %}
        </table>
        <div style='width: 55%'>
            <form action="" method="post">
                <div>
                    {{ commentForm.comment(class_="fresh-frm") }}</div>
                <div>
                    {{ commentForm.submitComment(class_="fresh-btn") }}</div>
            </form>
        </div>
    </div>
</div>

{% endblock %}